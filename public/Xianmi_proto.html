<!DOCTYPE html>
<!-- saved from url=(0069)http://192.168.182.128/wiki/index.php/Xianmi_proto#.E7.99.BB.E5.BD.95 -->
<html lang="zh-cn" dir="ltr" class="client-chrome client-chrome-4 client-webkit client-mac"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Xianmi proto - SimonWiki</title>
<meta name="generator" content="MediaWiki 1.17.0">
<link rel="alternate" type="application/x-wiki" title="编辑" href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit">
<link rel="edit" title="编辑" href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit">
<link rel="shortcut icon" href="http://192.168.182.128/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://192.168.182.128/wiki/opensearch_desc.php" title="SimonWiki (zh-cn)">
<link rel="EditURI" type="application/rsd+xml" href="http://192.168.182.128/wiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="SimonWiki的Atom订阅" href="http://192.168.182.128/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&feed=atom">
<link rel="stylesheet" href="css/proto.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style type="text/css">/*<![CDATA[*/
.source-javascript {line-height: normal;}
.source-javascript li, .source-javascript pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for javascript
 * CSS class: source-javascript, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.javascript.source-javascript .de1, .javascript.source-javascript .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.javascript.source-javascript  {font-family:monospace;}
.javascript.source-javascript .imp {font-weight: bold; color: red;}
.javascript.source-javascript li, .javascript.source-javascript .li1 {font-weight: normal; vertical-align:top;}
.javascript.source-javascript .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.javascript.source-javascript .li2 {font-weight: bold; vertical-align:top;}
.javascript.source-javascript .kw1 {color: #000066; font-weight: bold;}
.javascript.source-javascript .kw2 {color: #003366; font-weight: bold;}
.javascript.source-javascript .kw3 {color: #000066;}
.javascript.source-javascript .co1 {color: #006600; font-style: italic;}
.javascript.source-javascript .co2 {color: #009966; font-style: italic;}
.javascript.source-javascript .coMULTI {color: #006600; font-style: italic;}
.javascript.source-javascript .es0 {color: #000099; font-weight: bold;}
.javascript.source-javascript .br0 {color: #009900;}
.javascript.source-javascript .sy0 {color: #339933;}
.javascript.source-javascript .st0 {color: #3366CC;}
.javascript.source-javascript .nu0 {color: #CC0000;}
.javascript.source-javascript .me1 {color: #660066;}
.javascript.source-javascript .ln-xtra, .javascript.source-javascript li.ln-xtra, .javascript.source-javascript div.ln-xtra {background-color: #ffc;}
.javascript.source-javascript span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/wiki/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr ns-0 ns-subject page-Xianmi_proto skin-vector" data-feedly-mini="yes">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">Xianmi proto</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
				<!-- tagline -->
				<div id="siteSub">出自SimonWiki</div>
				<!-- /tagline -->
				<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav">
					跳转到： <a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#mw-head">导航</a>,
					<a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#p-search">搜索</a>
				</div>
				<!-- /jumpto -->
								<!-- bodytext -->
				<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>目录</h2> <span class="toctoggle">[<a id="togglelink" class="internal" href="http://192.168.182.128/wiki/index.php/Xianmi_proto#">隐藏</a>]</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="./Xianmi_proto_files/Xianmi_proto.html"><span class="tocnumber">1</span> <span class="toctext">登录</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E7.99.BB.E5.BD.95.E5.AE.8C.E6.88.90.E5.90.8E.E9.89.B4.E6.9D.83"><span class="tocnumber">1.1</span> <span class="toctext">登录完成后鉴权</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E5.8F.91.E8.B5.B7.E7.99.BB.E5.BD.95.E6.93.8D.E4.BD.9C"><span class="tocnumber">1.2</span> <span class="toctext">发起登录操作</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E6.9F.A5.E8.AF.A2.E4.BA.A4.E6.98.93"><span class="tocnumber">2</span> <span class="toctext">查询交易</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E4.BF.AE.E6.94.B9.E4.BA.A4.E6.98.93"><span class="tocnumber">3</span> <span class="toctext">修改交易</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E4.BA.A4.E6.98.93.E5.85.A5.E9.98.9F"><span class="tocnumber">4</span> <span class="toctext">交易入队</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E4.BA.A4.E6.98.93.E5.87.BA.E9.98.9F"><span class="tocnumber">5</span> <span class="toctext">交易出队</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#.E6.9F.A5.E8.AF.A2.E5.BD.93.E5.89.8D.E9.98.9F.E5.88.97"><span class="tocnumber">6</span> <span class="toctext">查询当前队列</span></a></li>
</ul>
</td></tr></tbody></table>
<h2><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=1" title="编辑段落：登录">编辑</a>]</span> <span class="mw-headline" id=".E7.99.BB.E5.BD.95">登录</span></h2>
<h3><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=2" title="编辑段落：登录完成后鉴权">编辑</a>]</span> <span class="mw-headline" id=".E7.99.BB.E5.BD.95.E5.AE.8C.E6.88.90.E5.90.8E.E9.89.B4.E6.9D.83">登录完成后鉴权</span></h3>
<ul><li>HTTP method
</li></ul>
<p>GET
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/login?redirect_dir=index.html" class="external free" rel="nofollow">http://domain/login?redirect_dir=index.html</a>
</p>
<ul><li>HTTP Response
</li></ul>
<p>//成功返回
redirect url
</p><p>//失败返回
redirect innerLogin.ejs
</p>
<h3><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=3" title="编辑段落：发起登录操作">编辑</a>]</span> <span class="mw-headline" id=".E5.8F.91.E8.B5.B7.E7.99.BB.E5.BD.95.E6.93.8D.E4.BD.9C">发起登录操作</span></h3>
<ul><li>HTTP method
</li></ul>
<p>POST
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/login" class="external free" rel="nofollow">http://domain/login</a>
</p>
<ul><li>HTTP Post Request
</li></ul>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"user_id"</span><span class="sy0">:</span>  <span class="st0">"DaDong4Custom@SY"</span><span class="sy0">,</span>           <span class="co1">//用户Id</span>
    <span class="st0">"login_token"</span><span class="sy0">:</span>  <span class="st0">"b921d1d70311b390b5717a528978bc36"</span>  <span class="co1">//登录口令</span>
<span class="br0">}</span></pre></div></div>
<ul><li>HTTP Response
</li></ul>
<p>//成功返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 200                   //状态码
}</span></pre></div></div>
<p>//失败返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 461,                   //状态码
    “error_msg"</span><span class="sy0">:</span> <span class="st0">"Account is not found"</span><span class="sy0">,</span>  <span class="co1">//错误消息</span>
<span class="br0">}</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="co1">//请求示例</span>
curl <span class="sy0">-</span>l <span class="sy0">-</span>H <span class="st0">"Content-type: application/json"</span> <span class="sy0">-</span>X POST <span class="sy0">-</span>d <span class="st0">'{"user_id":"DaDong4Custom@SY", "login_token":"b921d1d70311b390b5717a528978bc36"}'</span> http<span class="sy0">:</span><span class="co1">//www.51xmi.com:8080/login</span></pre></div></div>
<h2><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=4" title="编辑段落：查询交易">编辑</a>]</span> <span class="mw-headline" id=".E6.9F.A5.E8.AF.A2.E4.BA.A4.E6.98.93">查询交易</span></h2>
<ul><li>HTTP method
</li></ul>
<p>GET
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/tradeQuery?phoneNumber=xxxxx" class="external free" rel="nofollow">http://domain/tradeQuery?phoneNumber=xxxxx</a>
</p>
<ul><li>HTTP Response
</li></ul>
<p>//成功响应
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
  <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
  "</span>error_code<span class="st0">": 200,                   //状态码
  "</span>param<span class="st0">": {
    trades_num: 1,
    trades: [
    {
    “tid”: "</span>E20151123123456<span class="st0">",   //交易编号
    “num”: 5,                              //商品总数
    "</span>price<span class="st0">": 200.78,                    //商品总价
    "</span>buyer_nick<span class="st0">": "</span>simon<span class="st0">"         //买家昵称
    "</span>buyer_message<span class="st0">": "</span><span class="st0">",          //买家留言
    "</span>receiver_mobile<span class="st0">": "</span><span class="nu0">13512501826</span><span class="st0">",  //买家手机
    "</span>receiver_city<span class="st0">": "</span>\u676d\u5dde\u5e02<span class="st0">",
    "</span>receiver_district<span class="st0">": "</span>\u897f\u6e56\u533a<span class="st0">",
    "</span>receiver_name<span class="st0">": "</span>\u4e1c\u65b9\u8d25\u5bb6<span class="st0">",
    "</span>receiver_state<span class="st0">": "</span>\u6d59\u6c5f\u7701<span class="st0">",
    "</span>receiver_address<span class="st0">": "</span>\u534e\u590f\u8def#<span class="nu0">12</span><span class="st0">",
    "</span>receiver_zip<span class="st0">": "</span><span class="nu0">223700</span><span class="st0">",
    "</span>status_str<span class="st0">"： "</span>已付款<span class="st0">",          //交易状态
    "</span>orders<span class="st0">": [
         {
             "</span>oid<span class="st0">": 14776,        //订单编号
             "</span>sku_id<span class="st0">": 32221,   //商品编号
             "</span>num<span class="st0">": 2,              //商品数量
              "</span>title<span class="st0">": "</span>大鸭梨<span class="st0">",   //商品名称
              "</span>price<span class="st0">": 100.05,   //订单价格
              "</span>pic_path<span class="st0">":  "</span>https<span class="sy0">:</span><span class="co1">//dn-kdt-img.qbox.me?imageView2/2/w/200/h/0/q/75/format/png",             //商品图片路径</span>
              <span class="st0">"pic_thumb_path"</span> <span class="sy0">:</span> <span class="st0">"https://dn-kdt-img.qbox.me?imageView2/2/w/200/h/0/q/75/format/jpg"</span><span class="sy0">,</span>  <span class="co1">//商品缩略图路径</span>
         <span class="br0">}</span>
         ......
    <span class="br0">]</span><span class="sy0">,</span>
    <span class="st0">"fetch_detail"</span><span class="sy0">:</span> <span class="br0">{</span>   <span class="co1">//提货信息</span>
          <span class="st0">"fetcher_name"</span><span class="sy0">:</span> <span class="st0">"simon"</span><span class="sy0">,</span>  <span class="co1">//提货人</span>
           <span class="st0">"fetcher_mobile"</span><span class="sy0">:</span> <span class="st0">"13512501826"</span><span class="sy0">,</span> <span class="co1">//提货人联系电话</span>
           <span class="st0">"fetch_time"</span><span class="sy0">:</span> <span class="st0">"2014-08-20 12:08:00"</span><span class="sy0">,</span> <span class="co1">//提货时间</span>
           <span class="st0">"shop_name"</span><span class="sy0">:</span> <span class="st0">"沈阳大东店"</span><span class="sy0">,</span>
           <span class="st0">"shop_mobile"</span><span class="sy0">:</span> <span class="st0">"13812501826"</span><span class="sy0">,</span>
           <span class="st0">"shop_state"</span><span class="sy0">:</span> <span class="st0">"<span class="es0">\u</span>6d59<span class="es0">\u</span>6c5f<span class="es0">\u</span>7701"</span><span class="sy0">,</span>
           <span class="st0">"shop_city"</span><span class="sy0">:</span> <span class="st0">"<span class="es0">\u</span>676d<span class="es0">\u</span>5dde<span class="es0">\u</span>5e02"</span><span class="sy0">,</span>
           <span class="st0">"shop_district"</span><span class="sy0">:</span> <span class="st0">"<span class="es0">\u</span>897f<span class="es0">\u</span>6e56<span class="es0">\u</span>533a"</span><span class="sy0">,</span>
           <span class="st0">"shop_address"</span><span class="sy0">:</span> <span class="st0">"<span class="es0">\u</span>73af<span class="es0">\u</span>57ce<span class="es0">\u</span>897f<span class="es0">\u</span>8def16<span class="es0">\u</span>53f7"</span>
     <span class="br0">}</span>
    <span class="br0">}</span><span class="br0">]</span>
   <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>//失败响应
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 404,                   //状态码
    “error_msg"</span><span class="sy0">:</span> <span class="st0">"not found"</span><span class="sy0">,</span>        <span class="co1">//错误消息</span>
<span class="br0">}</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="co1">//请求示例</span>
curl <span class="sy0">-</span>l http<span class="sy0">:</span><span class="co1">//www.51xmi.com:8080/tradeQuery?phoneNumber=18710095369</span></pre></div></div>
<h2><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=5" title="编辑段落：修改交易">编辑</a>]</span> <span class="mw-headline" id=".E4.BF.AE.E6.94.B9.E4.BA.A4.E6.98.93">修改交易</span></h2>
<ul><li>HTTP method
</li></ul>
<p>POST
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/tradeUpdate" class="external free" rel="nofollow">http://domain/tradeUpdate</a>
</p>
<ul><li>HTTP Post Request
</li></ul>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"method"</span><span class="sy0">:</span>  <span class="st0">"updateFetchStatus"</span><span class="sy0">,</span>            <span class="co1">//更新交易状态</span>
    <span class="st0">"tid"</span><span class="sy0">:</span>  <span class="st0">"E20151123123456"</span><span class="sy0">,</span>           <span class="co1">//交易编号</span>
    <span class="st0">"fetchStatus"</span><span class="sy0">:</span>  <span class="nu0">1</span>  <span class="co1">//更新取货状态</span>
<span class="br0">}</span></pre></div></div>
<ul><li>HTTP Response
</li></ul>
<p>//成功返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 200,                   //状态码
    "</span>param<span class="st0">": {
        "</span>tid<span class="st0">":  "</span>E20151123123456<span class="st0">"  //交易编号
    }
}</span></pre></div></div>
<p>//失败返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 405,                   //状态码
    “error_msg"</span><span class="sy0">:</span> <span class="st0">"connect db timeout"</span><span class="sy0">,</span>  <span class="co1">//错误消息</span>
    <span class="st0">"param"</span><span class="sy0">:</span> <span class="br0">{</span>
        <span class="st0">"tid"</span><span class="sy0">:</span>  <span class="st0">"E20151123123456"</span>  <span class="co1">//交易编号</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="co1">//请求示例</span>
curl <span class="sy0">-</span>l <span class="sy0">-</span>H <span class="st0">"Content-type: application/json"</span> <span class="sy0">-</span>X POST <span class="sy0">-</span>d <span class="st0">'{"tid":"E20151116191234037345133","method":"updateFetchStatus", "fetchStatus":1}'</span> http<span class="sy0">:</span><span class="co1">//www.51xmi.com:8080/tradeUpdate</span></pre></div></div>
<h2><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=6" title="编辑段落：交易入队">编辑</a>]</span> <span class="mw-headline" id=".E4.BA.A4.E6.98.93.E5.85.A5.E9.98.9F">交易入队</span></h2>
<ul><li>HTTP method
</li></ul>
<p>POST
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/queueing" class="external free" rel="nofollow">http://domain/queueing</a>
</p>
<ul><li>HTTP Post Request
</li></ul>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"method"</span><span class="sy0">:</span>  <span class="st0">"queuePush"</span><span class="sy0">,</span>               <span class="co1">//交易入队</span>
    <span class="st0">"tid"</span><span class="sy0">:</span>  <span class="st0">"E20151123123456"</span>            <span class="co1">//交易编号</span>
<span class="br0">}</span></pre></div></div>
<ul><li>HTTP Response
</li></ul>
<p>//成功返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 200,                   //状态码
    "</span>params<span class="st0">": {
        "</span>tid<span class="st0">":  "</span>E20151123123456<span class="st0">"  //交易编号
    }
}</span></pre></div></div>
<p>//失败返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 405,                   //状态码
    “error_msg"</span><span class="sy0">:</span> <span class="st0">"not exist tid"</span><span class="sy0">,</span>    <span class="co1">//错误消息</span>
    <span class="st0">"params"</span><span class="sy0">:</span> <span class="br0">{</span>
        <span class="st0">"tid"</span><span class="sy0">:</span>  <span class="st0">"E20151123123456"</span>  <span class="co1">//交易编号</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="co1">//请求示例</span>
curl <span class="sy0">-</span>l <span class="sy0">-</span>H <span class="st0">"Content-type: application/json"</span> <span class="sy0">-</span>X POST <span class="sy0">-</span>d <span class="st0">'{"tid":"E20151104170833037373891","method":"queuePush", "action":"skip"}'</span> http<span class="sy0">:</span><span class="co1">//www.51xmi.com:8080/queueing</span></pre></div></div>
<h2><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=7" title="编辑段落：交易出队">编辑</a>]</span> <span class="mw-headline" id=".E4.BA.A4.E6.98.93.E5.87.BA.E9.98.9F">交易出队</span></h2>
<ul><li>HTTP method
</li></ul>
<p>POST
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/queueing" class="external free" rel="nofollow">http://domain/queueing</a>
</p>
<ul><li>HTTP Post Request
</li></ul>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"method"</span><span class="sy0">:</span>  <span class="st0">"queuePop"</span><span class="sy0">,</span>               <span class="co1">//交易入队</span>
    <span class="st0">"tid"</span><span class="sy0">:</span>  <span class="st0">"E20151123123456"</span><span class="sy0">,</span>          <span class="co1">//交易编号</span>
    <span class="st0">"action"</span><span class="sy0">:</span> <span class="st0">"skip"</span>                             <span class="co1">//可选，跳过处理</span>
<span class="br0">}</span></pre></div></div>
<ul><li>HTTP Response
</li></ul>
<p>//成功返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 200,                   //状态码
    "</span>params<span class="st0">": {
        "</span>tid<span class="st0">":  "</span>E20151123123456<span class="st0">"  //交易编号
    }
}</span></pre></div></div>
<p>//失败返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 405,                   //状态码
    “error_msg"</span><span class="sy0">:</span> <span class="st0">"not exist tid"</span><span class="sy0">,</span>    <span class="co1">//错误消息</span>
    <span class="st0">"params"</span><span class="sy0">:</span> <span class="br0">{</span>
        <span class="st0">"tid"</span><span class="sy0">:</span>  <span class="st0">"E20151123123456"</span>  <span class="co1">//交易编号</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="co1">//请求示例</span>
curl <span class="sy0">-</span>l <span class="sy0">-</span>H <span class="st0">"Content-type: application/json"</span> <span class="sy0">-</span>X POST <span class="sy0">-</span>d <span class="st0">'{"tid":"E20151104170833037373891","method":"queuePop", "action":"skip"}'</span> http<span class="sy0">:</span><span class="co1">//www.51xmi.com:8080/queueing</span></pre></div></div>
<h2><span class="editsection">[<a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit&section=8" title="编辑段落：查询当前队列">编辑</a>]</span> <span class="mw-headline" id=".E6.9F.A5.E8.AF.A2.E5.BD.93.E5.89.8D.E9.98.9F.E5.88.97">查询当前队列</span></h2>
<ul><li>HTTP method
</li></ul>
<p>GET
</p>
<ul><li>HTTP url
</li></ul>
<p><a href="http://domain/queueing?method=queueGet&pos=current" class="external free" rel="nofollow">http://domain/queueing?method=queueGet&amp;pos=current</a>
</p>
<ul><li>HTTP Response
</li></ul>
<p>//成功返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 200,                   //状态码
    "</span>param<span class="st0">": {
        "</span>tid<span class="st0">":  "</span>E20151123123456<span class="st0">"  //交易编号
    }
}</span></pre></div></div>
<p><br>
//失败返回
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="br0">{</span>
    <span class="st0">"request_id"</span><span class="sy0">:</span> <span class="st0">"123456789”，   //请求事务编号
    "</span>error_code<span class="st0">": 404,                   //状态码
    "</span>error_msg<span class="st0">": "</span>no more trade <span class="kw1">in</span> queue<span class="st0">"
}</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="javascript source-javascript"><pre class="de1"><span class="co1">//请求示例</span>
curl <span class="sy0">-</span>G <span class="sy0">-</span>d <span class="st0">"method=queueGet&amp;pos=current"</span> http<span class="sy0">:</span><span class="co1">//www.51xmi.com:8080/queueing</span></pre></div></div>

<!-- 
NewPP limit report
Preprocessor node count: 210/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key my_wiki:pcache:idhash:99-0!*!0!!zh-cn!* and timestamp 20151208072350 -->
<div class="printfooter">
取自“<a href="http://192.168.182.128/wiki/index.php/Xianmi_proto">http://192.168.182.128/wiki/index.php/Xianmi_proto</a>”</div>
				<!-- /bodytext -->
								<!-- catlinks -->
				<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="特殊:页面分类">1个分类</a>: <span dir="ltr"><a href="http://192.168.182.128/wiki/index.php?title=%E5%88%86%E7%B1%BB:%E9%B2%9C%E7%B1%B3&action=edit&redlink=1" class="new" title="分类:鲜米（尚未撰写）">鲜米</a></span></div></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>个人工具</h5>
	<ul>
					<li id="pt-userpage"><a href="http://192.168.182.128/wiki/index.php/%E7%94%A8%E6%88%B7:Simon" title="您的用户页 [ctrl-option-.]" accesskey="." class="new">Simon</a></li>
					<li id="pt-mytalk"><a href="http://192.168.182.128/wiki/index.php/%E7%94%A8%E6%88%B7%E8%AE%A8%E8%AE%BA:Simon" title="您的对话页 [ctrl-option-n]" accesskey="n" class="new">讨论页</a></li>
					<li id="pt-preferences"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE" title="您的参数设置">设置</a></li>
					<li id="pt-watchlist"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E7%9B%91%E8%A7%86%E5%88%97%E8%A1%A8" title="您所监视页面的更改列表 [ctrl-option-l]" accesskey="l">监视列表</a></li>
					<li id="pt-mycontris"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E8%B4%A1%E7%8C%AE/Simon" title="您的贡献列表 [ctrl-option-y]" accesskey="y">贡献</a></li>
					<li id="pt-logout"><a href="http://192.168.182.128/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%87%BA&returnto=Xianmi_proto" title="退出">退出</a></li>
			</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>名字空间</h5>
	<ul>
					<li id="ca-nstab-main" class="selected"><span><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto" title="查看页面内容 [ctrl-option-c]" accesskey="c">页面</a></span></li>
					<li id="ca-talk" class="new"><span><a href="http://192.168.182.128/wiki/index.php?title=%E8%AE%A8%E8%AE%BA:Xianmi_proto&action=edit&redlink=1" title="关于页面正文的讨论 [ctrl-option-t]" accesskey="t">讨论</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
		<h5><span>变换</span><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>查看</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto">阅读</a></span></li>
					<li id="ca-edit"><span><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=edit" title="你可编辑此页，请在保存前先预览一下。 [ctrl-option-e]" accesskey="e">编辑</a></span></li>
					<li id="ca-history" class="collapsible "><span><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=history" title="此页面的早前修订版本 [ctrl-option-h]" accesskey="h">查看历史</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu">
	<h5><span>动作</span><a href="http://192.168.182.128/wiki/index.php/Xianmi_proto#"></a></h5>
	<div class="menu">
		<ul>
							<li id="ca-delete"><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=delete" title="删除此页 [ctrl-option-d]" accesskey="d">删除</a></li>
							<li id="ca-move"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E7%A7%BB%E5%8A%A8%E9%A1%B5%E9%9D%A2/Xianmi_proto" title="移动此页 [ctrl-option-m]" accesskey="m">移动</a></li>
							<li id="ca-protect"><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=protect" title="保护此页 [ctrl-option-=]" accesskey="=">保护</a></li>
							<li id="ca-watch"><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&action=watch" title="将此页面加入监视列表 [ctrl-option-w]" accesskey="w">监视</a></li>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">搜索</label></h5>
	<form action="http://192.168.182.128/wiki/index.php" id="searchform">
		<input type="hidden" name="title" value="特殊:搜索">
				<input id="searchInput" name="search" type="text" title="搜索该网站 [ctrl-option-f]" accesskey="f" value="">
		<input type="submit" name="go" class="searchButton" id="searchGoButton" value="进入" title="如果相同的标题存在的话便直接前往该页面">
		<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="搜索" title="搜索该文字的页面">
			</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(/wiki/skins/common/images/wiki.png);" href="http://192.168.182.128/wiki/index.php/%E9%A6%96%E9%A1%B5" title="访问首页"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id="p-navigation">
	<h5>导航</h5>
	<div class="body">
				<ul>
					<li id="n-mainpage-description"><a href="http://192.168.182.128/wiki/index.php/%E9%A6%96%E9%A1%B5" title="访问首页 [ctrl-option-z]" accesskey="z">首页</a></li>
					<li id="n-portal"><a href="http://192.168.182.128/wiki/index.php/SimonWiki:%E7%A4%BE%E5%8C%BA" title="关于本计划，您可以做什么，应该如何做">社区入口</a></li>
					<li id="n-currentevents"><a href="http://192.168.182.128/wiki/index.php/SimonWiki:%E5%BD%93%E5%89%8D%E4%BA%8B%E4%BB%B6" title="查找当前事件的背景信息">当前事件</a></li>
					<li id="n-recentchanges"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="列出该网站的最近修改 [ctrl-option-r]" accesskey="r">最近更改</a></li>
					<li id="n-randompage"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="随机载入一个页面 [ctrl-option-x]" accesskey="x">随机页面</a></li>
					<li id="n-help"><a href="http://192.168.182.128/wiki/index.php/%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="寻求帮助">帮助</a></li>
				</ul>
			</div>
</div>

<!-- /navigation -->

<!-- 特殊页面 -->
<div class="portal" id="p-.E7.89.B9.E6.AE.8A.E9.A1.B5.E9.9D.A2">
	<h5>特殊页面</h5>
	<div class="body">
				<ul>
					<li id="n-.E6.89.80.E6.9C.89.E5.88.86.E7.B1.BB"><a href="http://192.168.182.128/wiki/index.php/%E6%89%80%E6%9C%89%E5%88%86%E7%B1%BB">所有分类</a></li>
					<li id="n-.E7.BB.B4.E5.9F.BA.E8.AF.AD.E6.B3.95"><a href="http://192.168.182.128/wiki/index.php/%E7%BB%B4%E5%9F%BA%E8%AF%AD%E6%B3%95">维基语法</a></li>
					<li id="n-.E8.B0.81.E5.9C.A8.E7.BA.BF.E4.B8.8A"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:WhosOnline">谁在线上</a></li>
					<li id="n-.E7.82.B9.E5.87.BB.E6.8E.92.E8.A1.8C"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E7%83%AD%E7%82%B9%E9%A1%B5%E9%9D%A2">点击排行</a></li>
					<li id="n-.E5.BE.85.E6.92.B0.E9.A1.B5.E9.9D.A2"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E5%BE%85%E6%92%B0%E9%A1%B5%E9%9D%A2">待撰页面</a></li>
				</ul>
			</div>
</div>

<!-- /特殊页面 -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id="p-tb">
	<h5>工具箱</h5>
	<div class="body">
		<ul>
					<li id="t-whatlinkshere"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/Xianmi_proto" title="列出所有与此页相链的页面 [ctrl-option-j]" accesskey="j">链入页面</a></li>
						<li id="t-recentchangeslinked"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/Xianmi_proto" title="从此页链出的所有页面的更改 [ctrl-option-k]" accesskey="k">链出更改</a></li>
																																					<li id="t-upload"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6" title="上传文件 [ctrl-option-u]" accesskey="u">上传文件</a></li>
											<li id="t-specialpages"><a href="http://192.168.182.128/wiki/index.php/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面列表 [ctrl-option-q]" accesskey="q">特殊页面</a></li>
									<li id="t-print"><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&printable=yes" rel="alternate" title="这个页面的可打印版本 [ctrl-option-p]" accesskey="p">可打印版</a></li>
						<li id="t-permalink"><a href="http://192.168.182.128/wiki/index.php?title=Xianmi_proto&oldid=291" title="这个页面修订版本的永久链接">永久链接</a></li>
						</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
											<ul id="footer-info">
																	<li id="footer-info-lastmod"> 此页面最后修订于2015年12月8日 (星期二) 07:23。</li>
																							<li id="footer-info-viewcount">此页面已被浏览过51次。</li>
															</ul>
															<ul id="footer-places">
																	<li id="footer-places-privacy"><a href="http://192.168.182.128/wiki/index.php/SimonWiki:%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96" title="SimonWiki:隐私政策">隐私政策</a></li>
																							<li id="footer-places-about"><a href="http://192.168.182.128/wiki/index.php/SimonWiki:%E5%85%B3%E4%BA%8E" title="SimonWiki:关于">关于SimonWiki</a></li>
																							<li id="footer-places-disclaimer"><a href="http://192.168.182.128/wiki/index.php/SimonWiki:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="SimonWiki:免责声明">免责声明</a></li>
															</ul>
											<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="./Xianmi_proto_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		
<script src="./Xianmi_proto_files/load(1).php"></script><script src="./Xianmi_proto_files/load(2).php"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Xianmi_proto", "wgTitle": "Xianmi proto", "wgAction": "view", "wgArticleId": 99, "wgIsArticle": true, "wgUserName": "Simon", "wgUserGroups": ["sysop", "*", "user", "autoconfirmed"], "wgCurRevisionId": 291, "wgCategories": ["鲜米"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax", "mediawiki.legacy.ajaxwatch"]);
	mediaWiki.loader.go();
}
</script><script type="text/javascript" src="./Xianmi_proto_files/load(3).php"></script>

<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":"1","rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"zh-cn","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"watchlisttoken":"c954e9c8f8c3826e73c12a6e9c61dff33604bd4d"});;mediaWiki.loader.state({"user.options":"ready"});
}
</script>		<!-- fixalpha -->
		<script type="text/javascript"> if ( window.isMSIE55 ) fixalpha(); </script>
		<!-- /fixalpha -->
		<!-- Served in 0.027 secs. -->			

<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>
